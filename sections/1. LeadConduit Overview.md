# 1. LeadConduit Overview 

## What It Does 

LeadConduit is a real-time data integration platform designed for processing internet leads. It is basically an HTTP transaction handler that is customizable for a variety of different use-cases. In a typical scenario the system receives an HTTP POST of data, as from an online form submission. This post typically contains a consumer’s contact information (a "lead"), such as e-mail address, first and last name, phone number, etc. (It may also contain a lot of other data specific to the marketing campaign it’s part of. For example, mortgage-industry leads would contain details about the mortgage loan the consumer is shopping for: the size of the loan needed, their credit score, whether they qualify for a veteran’s loan offer, and much more.)

These lead posts are sent in to a LeadConduit **flow**, which a LeadConduit customer has set up to define the steps that should be taken with leads of that type. The flow includes what **sources** to accept leads from. Each source in a flow uses a particular **inbound integration**, which controls how the data on each post is parsed, and how the **fields** which make up the lead (“email”, “first_name”, etc.) are populated. How these integrations work will be discussed in much more detail later in this guide.

Sources are used for reporting, answering questions such as: “How many leads did Vendor X send in to this flow last month?” Each source may also have **acceptance criteria rules** defined for it, which allows the flow to immediately reject leads that don’t meet some bare minimum requirements. For example, if a particular vendor must always provide a valid postal code, this could be defined as a rule on that source.

Once a lead has been accepted in the flow, it proceeds to the remaining predefined **steps**. There are different types of steps. One type is a **recipient** step. In the UI, this type of step is presented as either an “Enhancement” or “Recipient” (formerly "Delivery") step; from the standpoint of an integration developer, they’re essentially the same. This kind of step is where LeadConduit makes HTTP requests of other services, via a particular **outbound integration**. These integrations and how they work is the main subject of this guide, but at a high level they define what data is sent where, in what format, and how the response from that service is parsed. They also control how data will be added to the lead from that point on in the flow, which is referred to as **appended data**.

The other type of step that can be added to a flow are **filter** steps, which define criteria to stop processing and reject a lead. These are similar to the acceptance criteria mentioned previously, but they apply to leads from _all_ sources, and they can be placed after recipient steps. That means that their rules can also use appended data. For example, after a recipient step that sends the lead’s email address to an email-verification service, there would probably be a filter step immediately following it, with a rule such as, “if the email-verification service responded that this email is fraudulent, then stop processing now”.

After all the defined steps have been executed, or if a filter evaluation results in early termination of the flow, a response is returned to the original source of the lead. The format of that response is determined by the inbound integration, but generally includes LeadConduit’s unique lead ID and some indication of overall success (i.e., a good, accepted lead) or failure (a bad, rejected lead). The duration of this process for each lead varies, depending on the number of steps and the responsiveness of external services, but is typically only a second or two.

## How It Does It

The LeadConduit service provides two interfaces, referred to as the **API** and the **handler**. The API is used by the web client UI (as well as directly from other systems, in some cases), while the handler interface receives incoming lead posts and, of course, handles them. 

These two interfaces are provided by a single Node.js server application. The many modules that make up the server are published on npm.org. Some are public, while others are available only to internal ActiveProspect developers. Source code is published on github.com and is also a mix of repos that are public (i.e., open source), and others that are accessible only to members of the ActiveProspect organization.

Similarly, all inbound and outbound integrations are Node.js modules and published on npm.org. Some parts of each integration module are used by the API, while others are used by the handler. For example,  when a flow step is being configured, the list of fields required by an outbound integration will be shown in the LeadConduit UI (via data from the API). The majority of the integration code – how to formulate the outbound request, how to parse the response, and more – will be used by the handler at lead-handling time.
